record(bo, "$(P)SIM")
{
    field(SCAN, "Passive")
    field(DTYP, "Soft Channel")
    field(ZNAM, "NO")
    field(ONAM, "YES")
    field(VAL, "$(RECSIM=0)")
    field(PINI, "YES")
}

record(bo, "$(P)DISABLE")
{
    field(DESC, "Disable comms")
    field(PINI, "YES")
    field(VAL, "$(DISABLE=0)")
    field(OMSL, "supervisory")
    field(ZNAM, "COMMS ENABLED")
    field(ONAM, "COMMS DISABLED")
}


# Temperature setpoint


record(ao, "$(P)A:TEMP:SP") {
    field(DESC, "TSET Sensor A")
    field(DTYP, "stream")
    field(OUT, "@Lakeshore340.proto setTempA $(PORT)")
    field(PREC, "5")
    field(EGU, "K")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:A:TEMP")
    field(SDIS, "$(P)DISABLE")
}

record(ai, "$(P)A:TEMP:SP:RBV") {
    field(DESC, "TSET readback Sensor A")
    field(DTYP, "stream")
    field(INP, "@Lakeshore340.proto getSetTempA $(PORT)")
    field(SCAN, "1 second")
    field(PREC, "5")
    field(EGU, "K")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:A:TEMP")
    field(SDIS, "$(P)DISABLE")
}


# PID settings


record(ai, "$(P)P") {
    field(DESC, "PID Proportional")
    field(DTYP, "stream")
    field(INP, "@Lakeshore340.proto getP $(PORT)")
    field(SCAN, "5 second")
    field(PREC, "3")
    field(EGU, "")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:P")
    field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)P:SP") {
    field(DESC, "PID Proportional")
    field(DTYP, "stream")
    field(OUT, "@Lakeshore340.proto setP($(P)) $(PORT)")
    field(PREC, "3")
    field(EGU, "")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:P")
    field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)SIM:P"){}

record(ai, "$(P)I") {
    field(DESC, "PID Integral")
    field(DTYP, "stream")
    field(INP, "@Lakeshore340.proto getI $(PORT)")
    field(SCAN, "5 second")
    field(PREC, "3")
    field(EGU, "")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:I")
    field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)I:SP") {
    field(DESC, "PID Integral")
    field(DTYP, "stream")
    field(OUT, "@Lakeshore340.proto setI($(P)) $(PORT)")
    field(PREC, "3")
    field(EGU, "")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:I")
    field(SDIS, "$(P)DISABLE")
}

record(ao, "$(P)SIM:I"){}

record(longin, "$(P)D") {
    field(DESC, "PID Derivative")
    field(DTYP, "stream")
    field(INP, "@Lakeshore340.proto getD $(PORT)")
    field(SCAN, "5 second")
    field(EGU, "")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:D")
    field(SDIS, "$(P)DISABLE")
}

record(longout, "$(P)D:SP") {
    field(DESC, "PID Derivative")
    field(DTYP, "stream")
    field(OUT, "@Lakeshore340.proto setD($(P)) $(PORT)")
    field(EGU, "")
    
    field(SIML, "$(P)SIM")
    field(SIOL, "$(P)SIM:D")
    field(SDIS, "$(P)DISABLE")
}

record(longout, "$(P)SIM:D"){}


